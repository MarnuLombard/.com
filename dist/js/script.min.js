window.Modernizr=function(a,b,c){function d(a){s.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&s[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+u.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+v.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.7.1",n={},o=!0,p=b.documentElement,q="modernizr",r=b.createElement(q),s=r.style,t=({}.toString,"Webkit Moz O ms"),u=t.split(" "),v=t.toLowerCase().split(" "),w={svg:"http://www.w3.org/2000/svg"},x={},y=[],z=y.slice,A={}.hasOwnProperty;l=e(A,"undefined")||e(A.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return A.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=z.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(z.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(z.call(arguments)))};return d}),x.cssanimations=function(){return i("animationName")},x.csscolumns=function(){return i("columnCount")},x.svg=function(){return!!b.createElementNS&&!!b.createElementNS(w.svg,"svg").createSVGRect};for(var B in x)l(x,B)&&(k=B.toLowerCase(),n[k]=x[B](),y.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof o&&o&&(p.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),r=j=null,n._version=m,n._domPrefixes=v,n._cssomPrefixes=u,n.testProp=function(a){return g([a])},n.testAllProps=i,p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(o?" js "+y.join(" "):""),n}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==q.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=r.shift();s=1,a?a.t?o(function(){("c"==a.t?m.injectCss:m.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):s=0}function i(a,c,d,e,f,i,j){function k(b){if(!n&&g(l.readyState)&&(t.r=n=1,!s&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&o(function(){v.removeChild(l)},50);for(var d in A[c])A[c].hasOwnProperty(d)&&A[c][d].onload()}}var j=j||m.errorTimeout,l=b.createElement(a),n=0,q=0,t={t:d,s:c,e:f,a:i,x:j};1===A[c]&&(q=1,A[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,q)},r.splice(e,0,t),"img"!=a&&(q||2===A[c]?(v.insertBefore(l,u?null:p),o(k,j)):A[c].push(l))}function j(a,b,c,d,f){return s=0,b=b||"j",e(a)?i("c"==b?x:w,a,b,this.i++,c,d,f):(r.splice(this.i++,0,a),1==r.length&&h()),this}function k(){var a=m;return a.loader={load:j,i:0},a}var l,m,n=b.documentElement,o=a.setTimeout,p=b.getElementsByTagName("script")[0],q={}.toString,r=[],s=0,t="MozAppearance"in n.style,u=t&&!!b.createRange().compareNode,v=u?n:p.parentNode,n=a.opera&&"[object Opera]"==q.call(a.opera),n=!!b.attachEvent&&!n,w=t?"object":n?"script":"img",x=n?"script":w,y=Array.isArray||function(a){return"[object Array]"==q.call(a)},z=[],A={},B={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};m=function(a){function b(a){var b,c,d,a=a.split("!"),e=z.length,f=a.pop(),g=a.length,f={url:f,origUrl:f,prefixes:a};for(c=0;g>c;c++)d=a[c].split("="),(b=B[d.shift()])&&(f=b(f,d));for(c=0;e>c;c++)f=z[c](f);return f}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(A[i.url]?i.noexec=!0:A[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),A[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}),g(a,l,b,0,j);else if(Object(a)===a)for(i in h=function(){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}(),a)a.hasOwnProperty(i)&&(!c&&!--h&&(d(l)?l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}:l[i]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),n()}}(m[i])),g(a[i],l,b,i,j))}else!c&&n()}var h,i,j=!!a.test,k=a.load||a.both,l=a.callback||f,m=l,n=a.complete||f;c(j?a.yep:a.nope,!!k),k&&c(k)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(y(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):y(j)?m(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},m.addPrefix=function(a,b){B[a]=b},m.addFilter=function(a){z.push(a)},m.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",l=function(){b.removeEventListener("DOMContentLoaded",l,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k,l,n=b.createElement("script"),e=e||m.errorTimeout;n.src=a;for(l in d)n.setAttribute(l,d[l]);c=j?h:c||f,n.onreadystatechange=n.onload=function(){!k&&g(n.readyState)&&(k=1,c(),n.onload=n.onreadystatechange=null)},o(function(){k||(k=1,c(1))},e),i?n.onload():p.parentNode.insertBefore(n,p)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(p.parentNode.insertBefore(e,p),o(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},$(function(){$("body").on("click","#ajaxLoad",function(a){var b="",c="icon--loading";a.preventDefault(),$(this).addClass(c),$.ajax({url:"includes/ajax/getPosts.php",type:"post",dataType:"json",data:{nowLoaded:$(this).attr("data-nowLoaded")},cache:!1,success:function(a){$.each(a,function(a,c){return"object"!=typeof c?!1:(b+='<div class="grid__item column__item dontsplit '+c.tagClass+'"><a href="'+c.image+'" class="collage__img" rel="foo" data-fluidbox><img src="'+c.thumb+'" alt="'+c.name+'"></a><div class="markdown">'+c.markdown+"<p><small>Tags: <em>"+c.tags+"</em></small></p></div></div>",void 0)}),"end"!=a.nowLoaded?$("#ajaxLoad").replaceWith('<button data-nowLoaded="'+a.nowLoaded+'" class="button__reload icon icon-reload" id="ajaxLoad">Load more</button>'):$("#ajaxLoad").replaceWith("<p>All posts loaded</p>"),$("#ajaxInto").append(b),callKilledFunctions()},error:function(a,b,c){console.log(a+"\n"+c)}})})}),function(a){function b(b){return"".trim?b.val().trim():a.trim(b.val())}a.fn.isHappy=function(c){function d(b){return a('<span id="'+b.id+'" class="unhappyMessage" role="alert">'+b.message+"</span>")}function e(){var a,b,d=!1;for(a=0,b=i.length;b>a;a+=1)i[a].testValid(!0)||(d=!0);return d?(f(c.unHappy)&&c.unHappy(),!1):c.testMode?(window.console&&console.warn("would have submitted"),!1):void 0}function f(a){return!!(a&&a.constructor&&a.call&&a.apply)}function g(e,g){var h=a(g),j={message:e.message,id:g.slice(1)+"_unhappy"},k=a(j.id).length>0?a(j.id):d(j);i.push(h),h.testValid=function(){var c,d,g,i=a(this),j=!1,l=!!i.get(0).attributes.getNamedItem("required")||e.required,m="password"===h.attr("type"),n=f(e.arg)?e.arg():e.arg;return c=f(e.clean)?e.clean(i.val()):e.trim||m?i.val():b(i),i.val(c),d=(c.length>0||"sometimes"===l)&&f(e.test),l===!0&&0===c.length?j=!0:d&&(j=!e.test(c,n)),j?(i.addClass("unhappy").after(k),!1):(g=k.get(0),g.parentNode&&g.parentNode.removeChild(g),i.removeClass("unhappy"),!0)},h.bind(c.when||"blur",h.testValid)}var h,i=[];for(h in c.fields)g(c.fields[h],h);return c.submitButton?a(c.submitButton).click(e):this.bind("submit",e),this}}(this.jQuery||this.Zepto);var happy={USPhone:function(a){return/^\(?(\d{3})\)?[\- ]?\d{3}[\- ]?\d{4}$/.test(a)},date:function(a){return/^(?:0[1-9]|1[0-2])\/(?:0[1-9]|[12][0-9]|3[01])\/(?:\d{4})/.test(a)},email:function(a){return/^(?:\w+\.?)*\w+@(?:\w+\.)+\w+$/.test(a)},minLength:function(a,b){return a.length>=b},maxLength:function(a,b){return a.length<=b},equal:function(a,b){return a==b}};!function(a){a.fn.columnize=function(b){function c(a,b){try{a.append(b)}catch(c){a[0].appendChild(b[0])}}var d={width:400,columns:!1,buildOnce:!1,overflow:!1,doneFunc:function(){},target:!1,ignoreImageLoading:!0,columnFloat:"left",lastNeverTallest:!1,accuracy:!1,manualBreaks:!1,cssClassPrefix:""};return b=a.extend(d,b),"string"==typeof b.width&&(b.width=parseInt(b.width,10),isNaN(b.width)&&(b.width=d.width)),this.each(function(){function e(a,b){var c=b?".":"";return p.length?c+p+"-"+a:c+a}function f(d,f,g,h){for(;(o||g.height()<h)&&f[0].childNodes.length;){var i=f[0].childNodes[0];if(a(i).find(e("columnbreak",!0)).length)return;if(a(i).hasClass(e("columnbreak")))return;c(d,a(i))}if(0!==d[0].childNodes.length){var j=d[0].childNodes,k=j[j.length-1];d[0].removeChild(k);var l=a(k);if(3==l[0].nodeType){var m=l[0].nodeValue,n=b.width/18;b.accuracy&&(n=b.accuracy);for(var p,q=null;g.height()<h&&m.length;){var r=m.indexOf(" ",n);p=-1!=r?m.substring(0,r):m,q=document.createTextNode(p),c(d,a(q)),m=m.length>n&&-1!=r?m.substring(r):""}if(g.height()>=h&&null!==q&&(d[0].removeChild(q),m=q.nodeValue+m),!m.length)return!1;l[0].nodeValue=m}return f.contents().length?f.prepend(l):c(f,l),3==l[0].nodeType}}function g(a,b,d,h){if(!a.contents(":last").find(e("columnbreak",!0)).length&&!a.contents(":last").hasClass(e("columnbreak"))&&b.contents().length){var i=b.contents(":first");if("undefined"==typeof i.get(0)||1!=i.get(0).nodeType)return;var j=i.clone(!0);if(i.hasClass(e("columnbreak")))c(a,j),i.remove();else if(o)c(a,j),i.remove();else if(1==j.get(0).nodeType&&!j.hasClass(e("dontend")))if(c(a,j),j.is("img")&&d.height()<h+20)i.remove();else if(i.hasClass(e("dontsplit"))&&d.height()<h+20)i.remove();else if(j.is("img")||i.hasClass(e("dontsplit")))j.remove();else{if(j.empty(),f(j,i,d,h))i.addClass(e("split"));else{if(i.addClass(e("split")),"OL"==i.get(0).tagName){var k=j.get(0).childElementCount+j.get(0).start;i.attr("start",k+1)}i.children().length&&g(j,i,d,h)}0===j.get(0).childNodes.length&&(j.remove(),i.removeClass(e("split")))}}}function h(){if(!k.data("columnized")||1!=k.children().length){if(k.data("columnized",!0),k.data("columnizing",!0),k.empty(),k.append(a("<div class='"+e("first")+" "+e("last")+" "+e("column")+" ' style='width:100%; float: "+b.columnFloat+";'></div>")),$col=k.children().eq(k.children().length-1),$destroyable=m.clone(!0),b.overflow){for(targetHeight=b.overflow.height,f($col,$destroyable,$col,targetHeight),$destroyable.contents().find(":first-child").hasClass(e("dontend"))||g($col,$destroyable,$col,targetHeight);$col.contents(":last").length&&i($col.contents(":last").get(0));){var d=$col.contents(":last");d.remove(),$destroyable.prepend(d)}for(var h="",j=document.createElement("DIV");$destroyable[0].childNodes.length>0;){var l=$destroyable[0].childNodes[0];if(l.attributes)for(var n=0;n<l.attributes.length;n++)0===l.attributes[n].nodeName.indexOf("jQuery")&&l.removeAttribute(l.attributes[n].nodeName);j.innerHTML="",j.appendChild($destroyable[0].childNodes[0]),h+=j.innerHTML}var o=a(b.overflow.id)[0];o.innerHTML=h}else c($col,$destroyable.contents());k.data("columnizing",!1),b.overflow&&b.overflow.doneFunc&&b.overflow.doneFunc()}}function i(b){return 3==b.nodeType?/^\s+$/.test(b.nodeValue)?b.previousSibling?i(b.previousSibling):!1:!1:1!=b.nodeType?!1:a(b).hasClass(e("dontend"))?!0:0===b.childNodes.length?!1:i(b.childNodes[b.childNodes.length-1])}function j(){if(q=0,n!=k.width()){n=k.width();var d=Math.round(k.width()/b.width),j=b.width,p=b.height;if(b.columns&&(d=b.columns),o&&(d=m.find(e("columnbreak",!0)).length+1,j=!1),1>=d)return h();if(!k.data("columnizing")){k.data("columnized",!0),k.data("columnizing",!0),k.empty(),k.append(a("<div style='width:"+Math.floor(100/d)+"%; float: "+b.columnFloat+";'></div>")),x=k.children(":last"),c(x,m.clone()),l=x.height(),k.empty();var r=l/d,s=3,t=!1;b.overflow?(s=1,r=b.overflow.height):p&&j&&(s=1,r=p,t=!0);for(var u=0;s>u&&20>u;u++){k.empty();var v,w,x,y;try{v=m.clone(!0)}catch(z){v=m.clone()}v.css("visibility","hidden");for(var A=0;d>A;A++)w=0===A?e("first"):"",w+=" "+e("column"),w=A==d-1?e("last")+" "+w:w,k.append(a("<div class='"+w+"' style='width:"+Math.floor(100/d)+"%; float: "+b.columnFloat+";'></div>"));for(A=0;A<d-(b.overflow?0:1)||t&&v.contents().length;){for(k.children().length<=A&&k.append(a("<div class='"+w+"' style='width:"+Math.floor(100/d)+"%; float: "+b.columnFloat+";'></div>")),x=k.children().eq(A),t&&x.width(j+"px"),f(x,v,x,r),g(x,v,x,r);x.contents(":last").length&&i(x.contents(":last").get(0));)y=x.contents(":last"),y.remove(),v.prepend(y);A++,0===x.contents().length&&v.contents().length?x.append(v.contents(":first")):A!=d-(b.overflow?0:1)||b.overflow||v.find(e("columnbreak",!0)).length&&d++}if(b.overflow&&!t){var B=!1,C=document.all&&-1!=navigator.appVersion.indexOf("MSIE 7.");if(B||C){for(var D="",E=document.createElement("DIV");v[0].childNodes.length>0;){var F=v[0].childNodes[0];for(A=0;A<F.attributes.length;A++)0===F.attributes[A].nodeName.indexOf("jQuery")&&F.removeAttribute(F.attributes[A].nodeName);E.innerHTML="",E.appendChild(v[0].childNodes[0]),D+=E.innerHTML}var G=a(b.overflow.id)[0];G.innerHTML=D}else a(b.overflow.id).empty().append(v.contents().clone(!0))}else if(t)k.children().each(function(a){x=k.children().eq(a),x.width(j+"px"),0===a?x.addClass(e("first")):a==k.children().length-1?x.addClass(e("last")):(x.removeClass(e("first")),x.removeClass(e("last")))}),k.width(k.children().length*j+"px");else{x=k.children().eq(k.children().length-1),v.contents().each(function(){x.append(a(this))});var H=(x.height(),0),I=1e7,J=0,K=!1,L=0;k.children().each(function(a){return function(b){var c=a.children().eq(b),d=c.children(":last").find(e("columnbreak",!0)).length;if(!d){var f=c.height();K=!1,H+=f,f>J&&(J=f,K=!0),I>f&&(I=f),L++}}}(k));var M=H/L;0===H?u=s:b.lastNeverTallest&&K?(q+=5,r+=30,u==s-1&&s++):J-I>30?r=M+30:Math.abs(M-r)>20?r=M:u=s}k.append(a("<br style='clear:both;'>"))}k.find(e("column",!0)).find(":first"+e("removeiffirst",!0)).remove(),k.find(e("column",!0)).find(":last"+e("removeiflast",!0)).remove(),k.find(e("split",!0)).find(":first"+e("removeiffirst",!0)).remove(),k.find(e("split",!0)).find(":last"+e("removeiflast",!0)).remove(),k.data("columnizing",!1),b.overflow&&b.overflow.doneFunc(),b.doneFunc()}}}var k=b.target?a(b.target):a(this),l=a(this).height(),m=a("<div></div>"),n=0,o=b.manualBreaks,p=d.cssClassPrefix;"string"==typeof b.cssClassPrefix&&(p=b.cssClassPrefix);var q=0;if(c(m,a(this).contents().clone(!0)),!b.ignoreImageLoading&&!b.target&&!k.data("imageLoaded")&&(k.data("imageLoaded",!0),a(this).find("img").length>0)){var r=function(a,d){return function(){a.data("firstImageLoaded")||(a.data("firstImageLoaded","true"),c(a.empty(),d.children().clone(!0)),a.columnize(b))}}(a(this),m);return a(this).find("img").one("load",r),a(this).find("img").one("abort",r),void 0}k.empty(),j(),b.buildOnce||a(window).resize(function(){b.buildOnce||(k.data("timeout")&&clearTimeout(k.data("timeout")),k.data("timeout",setTimeout(j,200)))})})}}(jQuery),function(a){"use strict";a(function(){var b=a.fluidbox={_currentCollection:{},_currentIndex:null,_currentOptions:{},_instance:{},_isLoading:!1,_isOpening:!1,_isClosing:!1,_isAnimated:!1,_isDraggable:!1,_hasModernizr:!1,_hasHammer:!1,_overlay:{},_viewport:{},_outer:{},_inner:{},_loading:{},_title:{},_animClasses:"animated flash bounce shake tada swing wobble wiggle pulse flip flipInX flipOutX flipInY flipOutY fadeIn fadeInUp fadeInDown fadeInLeft fadeInRight fadeInUpBig fadeInDownBig fadeInLeftBig fadeInRightBig fadeOut fadeOutUp fadeOutDown fadeOutLeft fadeOutRight fadeOutUpBig fadeOutDownBig fadeOutLeftBig fadeOutRightBig bounceIn bounceInDown bounceInUp bounceInLeft bounceInRight bounceOut bounceOutDown bounceOutUp bounceOutLeft bounceOutRight rotateIn rotateInDownLeft rotateInDownRight rotateInUpLeft rotateInUpRight rotateOut rotateOutDownLeft rotateOutDownRight rotateOutUpLeft rotateOutUpRight lightSpeedIn lightSpeedOut hinge rollIn rollOut",_transEndEventNames:"webkitAnimationEnd animationend oanimationend MSAnimationEnd",defaults:{resize:!0,preload:!0,touch:!0,animated:!0,padding:50,templates:{inner:'<div id="fluidbox-inner"></div>',outer:'<div id="fluidbox-outer"></div>',overlay:'<div id="fluidbox-overlay"></div>',loading:'<div id="fluidbox-loading"></div>',title:'<div id="fluidbox-title"></div>',buttons:{close:'<div id="fluidbox-btn-close"></div>',next:'<div id="fluidbox-btn-next"></div>',prev:'<div id="fluidbox-btn-prev"></div>'}},positions:{buttons:{close:"outer",next:"inner",prev:"inner"},title:"inner"},keys:{next:[39,40],prev:[37,38],close:[27]},animations:{open:"fadeIn",close:"fadeOut",next:{"in":"fadeInRight",out:"fadeOutLeft"},prev:{"in":"fadeInLeft",out:"fadeOutRight"}}},_createOverlay:function(){a(b._instance).triggerHandler("fluidboxBeforeCreate"),0===a("#fluidbox-outer").length&&(a("body").append(b._currentOptions.templates.outer),a("#fluidbox-outer").html(b._currentOptions.templates.inner)),0===a("#fluidbox-overlay").length&&a("body").append(b._currentOptions.templates.overlay),0===a("#fluidbox-loading").length&&a("body").append(b._currentOptions.templates.loading),0===a("#fluidbox-title").length&&b._currentOptions.positions.title!==!1&&a("#fluidbox-"+b._currentOptions.positions.title).append(b._currentOptions.templates.title),b._currentOptions.positions.buttons.close!==!1&&0===a("#fluidbox-btn-close").length&&a("#fluidbox-"+b._currentOptions.positions.buttons.close).append(b._currentOptions.templates.buttons.close),b._currentCollection.length>1&&(b._currentOptions.positions.buttons.next!==!1&&0===a("#fluidbox-btn-next").length&&a("#fluidbox-"+b._currentOptions.positions.buttons.next).append(b._currentOptions.templates.buttons.next),b._currentOptions.positions.buttons.prev!==!1&&0===a("#fluidbox-btn-prev").length&&a("#fluidbox-"+b._currentOptions.positions.buttons.prev).append(b._currentOptions.templates.buttons.prev)),b._overlay=a("#fluidbox-overlay"),b._outer=a("#fluidbox-outer"),b._inner=a("#fluidbox-inner"),b._loading=a("#fluidbox-loading"),b._title=a("#fluidbox-title"),b._isTouch&&b._outer.addClass("touch"),a(b._instance).triggerHandler("fluidboxAfterCreate")},_unbindEvents:function(){a(document).unbind("keydown.fluidbox"),a(window).unbind("resize.fluidbox"),b._overlay.unbind("click"),a("#fluidbox-btn-close").unbind("click"),a("#fluidbox-btn-next").unbind("click"),a("#fluidbox-btn-prev").unbind("click")},_bindEvents:function(){a(b._instance).triggerHandler("fluidboxBeforeBind"),a(document).bind("keydown.fluidbox",function(c){c.ctrlKey||c.altKey||c.shiftKey||c.metaKey||(a.inArray(c.which,b._currentOptions.keys.close)>-1?(b.close(),c.preventDefault()):b._currentCollection.length>1&&a.inArray(c.which,b._currentOptions.keys.next)>-1?(b.next(),c.preventDefault()):b._currentCollection.length>1&&a.inArray(c.which,b._currentOptions.keys.prev)>-1&&(b.prev(),c.preventDefault()))}),b._overlay.click(function(){b.close()}),a("#fluidbox-btn-close").click(function(){b.close()}),a("#fluidbox-btn-next").click(function(){b.next()}),a("#fluidbox-btn-prev").click(function(){b.prev()}),b._isTouch||b._outer.dblclick(function(){b._isDraggable=b._isDraggable===!0?!1:!0,b.resize()}),b._currentOptions.resize&&a(window).bind("resize.fluidbox",b.resize),b._isAnimated!==!1&&b._bindAnimationEvents(),b._isTouch&&b._bindTouchEvents(),a(b._instance).triggerHandler("fluidboxAfterBind")},_bindAnimationEvents:function(){b._isAnimated!==!1&&a(document).bind(b._transEndEventNames,function(c){a(c.target).removeClass(b._animClasses).removeClass("opening closing"),a(c.target).is(b._loading)&&(b._isLoading||b._loading.hide()),a(c.target).is(b._overlay)&&b._isClosing&&(b._overlay.remove(),b._inner.remove(),b._outer.remove(),b._loading.remove(),a("body").css({overflow:""}),a(document).unbind(b._transEndEventNames)),a(c.target).is(b._outer)&&b._isClosing&&b._outer.remove(),a(c.target).hasClass("fluidbox-outer-ghost")&&a(c.target).remove()})},_bindTouchEvents:function(){b._outer.hammer({drag:!0,transform:!0,swipe:!0,tap:!0,hold:!1}),b._outer.bind("dragstart",function(a){a.preventDefault(),b._outer.data("currentX",parseInt(b._outer.css("left"),10)),b._outer.data("currentY",parseInt(b._outer.css("top"),10))}),b._outer.bind("drag",function(a){b._isDraggable&&(a.preventDefault(),b._outer.css({left:Math.round(b._outer.data("currentX")+a.gesture.deltaX),top:Math.round(b._outer.data("currentY")+a.gesture.deltaY)}))}),b._outer.bind("dragend",function(a){a.preventDefault(),b._outer.removeData("currentX"),b._outer.removeData("currentY")}),b._outer.bind("doubletap",function(){b._isDraggable=!b._isDraggable,b.resize()}),b._outer.bind("transformstart",function(){b._outer.data("currentX",parseInt(b._outer.css("left"),10)),b._outer.data("currentY",parseInt(b._outer.css("top"),10)),b._outer.data("currentWidth",b._outer.width()),b._outer.data("currentHeight",b._outer.height()),b._isDraggable=!0}),b._outer.bind("transform",function(a){var c=Math.round(b._outer.data("currentWidth")*a.gesture.scale),d=Math.round(b._outer.data("currentHeight")*a.gesture.scale);b._outer.css({width:c,left:Math.round(b._outer.data("currentX")+(b._outer.data("currentWidth")-c)/2+a.gesture.deltaX),top:Math.round(b._outer.data("currentY")+(b._outer.data("currentHeight")-d)/2+a.gesture.deltaY)})}),b._outer.bind("transformend",function(){b._outer.removeData("currentWidth"),b._outer.removeData("currentX"),b._outer.removeData("currentY")}),b._outer.bind("swipe",function(a){b._isDraggable||("left"===a.gesture.direction?b.next():"right"===a.gesture.direction&&b.prev())})},_showLoading:function(a){b._isLoading=a,b._loading.removeClass(b._animClasses),b._isLoading?b._isAnimated!==!1?(b._loading.removeClass(b._animClasses).addClass("animated fadeIn"),b._loading.show()):b._loading.show():b._isAnimated!==!1?b._loading.removeClass(b._animClasses).addClass("animated fadeOut"):b._loading.hide()},_preloadCollection:function(){var c,d=0;for(d=0;d<b._currentCollection.length;d+=1)c=new Image,c.src=a(b._currentCollection[d]).attr("href")},open:function(c,d,e){b._currentCollection=c,b._instance=e,b._currentOptions=a.extend(!0,{},b.defaults,d),b._currentIndex=b._currentOptions.index,b._isOpening=!0,b._isClosing=!1,b._hasHammer="function"==typeof Hammer,b._hasModernizr="function"==typeof Modernizr,b._isTouch=b._currentOptions.touch,b._isTouch&&(!b._hasHammer||b._hasModernizr&&!Modernizr.touch)&&(b._isTouch=!1),b._isAnimated=b._currentOptions.animated,b._isAnimated&&b._hasModernizr&&!Modernizr.csstransitions&&(b._isAnimated=!1);var f=a.Event("fluidboxBeforeOpen");if(a(b._instance).triggerHandler(f),!f.isDefaultPrevented()){b._createOverlay(),b._isAnimated!==!1?(b._overlay.removeClass(b._animClasses).addClass("animated fadeIn opening"),b._overlay.show()):b._overlay.show();var g=document.body.scrollLeft+document.documentElement.scrollLeft,h=document.body.scrollTop+document.documentElement.scrollTop;a("body").css({overflow:"hidden"}),window.scrollTo(g,h),b.show(b._currentIndex,"open"),b._bindEvents(),b._currentOptions.preload&&b._preloadCollection(),a(b._instance).triggerHandler("fluidboxAfterOpen")}},close:function(){a(b._instance).triggerHandler("fluidboxBeforeClose"),b._isClosing=!0,b._isDraggable=!1,b._isAnimated!==!1?b._overlay.removeClass(b._animClasses).addClass("animated fadeOut closing"):b._overlay.hide(),b._isLoading===!1?b._isAnimated!==!1?b._outer.removeClass(b._animClasses).addClass("animated "+a(b._outer).data("animation").close+" closing"):b._outer.hide():(b._showLoading(!1),b._outer.hide()),b._unbindEvents(),a(b._instance).triggerHandler("fluidboxAfterClose")},next:function(){b._currentCollection.length<=1||b._isDraggable||b._isLoading||b.show(b._currentIndex===b._currentCollection.length-1?0:b._currentIndex+1,"next")},prev:function(){b._currentCollection.length<=1||b._isDraggable||b._isLoading||b.show(0===b._currentIndex?b._currentCollection.length-1:b._currentIndex-1,"prev")},show:function(c,d){if(!b._isLoading){("undefined"===c||0>c||c>b._currentCollection.length)&&(c=0),d||(d=c>b._currentIndex||c<b._currentIndex?c>b._currentIndex?"next":"prev":"open"),b._currentIndex=c;var e=b._currentCollection[c],f=new Image,g=a(b._outer).clone(!0);"open"===d||b._isLoading||(a(b._instance).triggerHandler("fluidboxBeforeHide"),a(b._outer).removeClass(b._animClasses),a(b._outer).hide(),a(g).removeAttr("id"),a(g).addClass("fluidbox-outer-ghost"),a(g).removeClass(b._animClasses),a("body").append(g),b._isAnimated!==!1?("prev"===d?a(g).addClass("animated "+a(g).data("animation").prev.out):"next"===d&&a(g).addClass("animated "+a(g).data("animation").next.out),a(g).show()):a(g).remove(),a(b._instance).triggerHandler("fluidboxAfterHide")),b._title.replaceWith(b._currentOptions.templates.title),b._title=a("#fluidbox-title"),b._inner.children("img").first().remove(),f.onload=function(){var f={index:c,target:e,direction:d,image:this,title:a(e).attr("title"),animation:a.extend(!0,{},b._currentOptions.animations,a(e).data("animation"))};a(b._instance).triggerHandler("fluidboxBeforeShow",f),a(b._outer).data("animation",a.extend(!0,{},b.defaults.animations,f.animation)),b._inner.append('<img src="'+a(e).attr("href")+'" width="'+this.width+'" height="'+this.height+'" />'),b._title.append(f.title),b._isAnimated!==!1?("open"===d?b._outer.removeClass(b._animClasses).addClass("animated "+a(b._outer).data("animation").open+" opening"):"prev"===d?b._outer.removeClass(b._animClasses).addClass("animated "+a(b._outer).data("animation").prev["in"]):"next"===d&&b._outer.removeClass(b._animClasses).addClass("animated "+a(b._outer).data("animation").next["in"]),b._outer.show()):b._outer.show(),b._showLoading(!1),b._currentOptions.resize&&b.resize(),a(b._instance).triggerHandler("fluidboxAfterShow",f)},f.src=a(e).attr("href"),b._showLoading(!0)}},resize:function(){var c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0;c=a(b._inner).children("img").attr("width"),d=a(b._inner).children("img").attr("height"),e=a(window).width(),f=a(window).height(),g=e-b._currentOptions.padding,h=f-b._currentOptions.padding,(c>g||d>h)&&!b._isDraggable?(k=Math.min(g/c,h/d),i=Math.round(c*k),j=Math.round(d*k),b._outer.css({width:i,left:Math.round(b._currentOptions.padding/2+(g-i)/2),top:Math.round(b._currentOptions.padding/2+(h-j)/2)})):b._outer.css({width:c,left:Math.round((e-c)/2),top:Math.round((f-d)/2)})}};a.fn.fluidbox=function(b){var c=a(this);return b=b||{},this.click(function(d){d.preventDefault();var e=[this];a(this).attr("rel")?(e=c.filter('[rel="'+a(this).attr("rel")+'"]'),b.index=e.index(this)):b.index=0,a.fluidbox.open(e,b,a(c))}),a(this)}})}(jQuery),function(a){function b(b,d,g,h,i){function j(){q.unbind("webkitTransitionEnd transitionend otransitionend oTransitionEnd"),d&&c(d,g,h,i),i.startOrder=[],i.newOrder=[],i.origSort=[],i.checkSort=[],p.removeStyle(i.prefix+"filter, filter, "+i.prefix+"transform, transform, opacity, display").css(i.clean).removeAttr("data-checksum"),window.atob||p.css({display:"none",opacity:"0"});var a=i.resizeContainer?"height":"";q.removeStyle(i.prefix+"transition, transition, "+i.prefix+"perspective, perspective, "+i.prefix+"perspective-origin, perspective-origin, "+a),"list"==i.layoutMode?(s.css({display:i.targetDisplayList,opacity:"1"}),i.origDisplay=i.targetDisplayList):(s.css({display:i.targetDisplayGrid,opacity:"1"}),i.origDisplay=i.targetDisplayGrid),i.origLayout=i.layoutMode;setTimeout(function(){if(p.removeStyle(i.prefix+"transition, transition"),i.mixing=!1,"function"==typeof i.onMixEnd){var a=i.onMixEnd.call(this,i);i=a?a:i}})}if(clearInterval(i.failsafe),i.mixing=!0,i.filter=b,"function"==typeof i.onMixStart){var k=i.onMixStart.call(this,i);i=k?k:i}for(var l=i.transitionSpeed,m=0;2>m;m++){var n=0==m?n=i.prefix:"";i.transition[n+"transition"]="all "+l+"ms linear",i.transition[n+"transform"]=n+"translate3d(0,0,0)",i.perspective[n+"perspective"]=i.perspectiveDistance+"px",i.perspective[n+"perspective-origin"]=i.perspectiveOrigin}var o=i.targetSelector,p=h.find(o);p.each(function(){this.data={}});var q=p.parent();q.css(i.perspective),i.easingFallback="ease-in-out","smooth"==i.easing&&(i.easing="cubic-bezier(0.25, 0.46, 0.45, 0.94)"),"snap"==i.easing&&(i.easing="cubic-bezier(0.77, 0, 0.175, 1)"),"windback"==i.easing&&(i.easing="cubic-bezier(0.175, 0.885, 0.320, 1.275)",i.easingFallback="cubic-bezier(0.175, 0.885, 0.320, 1)"),"windup"==i.easing&&(i.easing="cubic-bezier(0.6, -0.28, 0.735, 0.045)",i.easingFallback="cubic-bezier(0.6, 0.28, 0.735, 0.045)");var r="list"==i.layoutMode&&null!=i.listEffects?i.listEffects:i.effects;Array.prototype.indexOf&&(i.fade=r.indexOf("fade")>-1?"0":"",i.scale=r.indexOf("scale")>-1?"scale(.01)":"",i.rotateZ=r.indexOf("rotateZ")>-1?"rotate(180deg)":"",i.rotateY=r.indexOf("rotateY")>-1?"rotateY(90deg)":"",i.rotateX=r.indexOf("rotateX")>-1?"rotateX(90deg)":"",i.blur=r.indexOf("blur")>-1?"blur(8px)":"",i.grayscale=r.indexOf("grayscale")>-1?"grayscale(100%)":"");var s=a(),t=a(),u=[],v=!1;"string"==typeof b?u=f(b):(v=!0,a.each(b,function(a){u[a]=f(this)})),"or"==i.filterLogic?(""==u[0]&&u.shift(),u.length<1?t=t.add(h.find(o+":visible")):p.each(function(){var b=a(this);if(v){var c=0;a.each(u,function(){this.length?b.is("."+this.join(", ."))&&c++:c>0&&c++}),c==u.length?s=s.add(b):t=t.add(b)}else b.is("."+u.join(", ."))?s=s.add(b):t=t.add(b)})):(s=s.add(q.find(o+"."+u.join("."))),t=t.add(q.find(o+":not(."+u.join(".")+"):visible")));var w=s.length,x=a(),y=a(),z=a();if(t.each(function(){var b=a(this);"none"!=b.css("display")&&(x=x.add(b),z=z.add(b))}),s.filter(":visible").length==w&&!x.length&&!d){if(i.origLayout==i.layoutMode)return j(),!1;if(1==s.length)return"list"==i.layoutMode?(h.addClass(i.listClass),h.removeClass(i.gridClass),z.css("display",i.targetDisplayList)):(h.addClass(i.gridClass),h.removeClass(i.listClass),z.css("display",i.targetDisplayGrid)),j(),!1}if(i.origHeight=q.height(),s.length){if(h.removeClass(i.failClass),s.each(function(){var b=a(this);"none"==b.css("display")?y=y.add(b):z=z.add(b)}),i.origLayout!=i.layoutMode&&0==i.animateGridList)return"list"==i.layoutMode?(h.addClass(i.listClass),h.removeClass(i.gridClass),z.css("display",i.targetDisplayList)):(h.addClass(i.gridClass),h.removeClass(i.listClass),z.css("display",i.targetDisplayGrid)),j(),!1;if(!window.atob)return j(),!1;if(p.css(i.clean),z.each(function(){this.data.origPos=a(this).offset()}),"list"==i.layoutMode?(h.addClass(i.listClass),h.removeClass(i.gridClass),y.css("display",i.targetDisplayList)):(h.addClass(i.gridClass),h.removeClass(i.listClass),y.css("display",i.targetDisplayGrid)),y.each(function(){this.data.showInterPos=a(this).offset()}),x.each(function(){this.data.hideInterPos=a(this).offset()}),z.each(function(){this.data.preInterPos=a(this).offset()}),"list"==i.layoutMode?z.css("display",i.targetDisplayList):z.css("display",i.targetDisplayGrid),d&&c(d,g,h,i),d&&e(i.origSort,i.checkSort))return j(),!1;x.hide(),y.each(function(){this.data.finalPos=a(this).offset()}),z.each(function(){this.data.finalPrePos=a(this).offset()}),i.newHeight=q.height(),d&&c("reset",null,h,i),y.hide(),z.css("display",i.origDisplay),"block"==i.origDisplay?(h.addClass(i.listClass),y.css("display",i.targetDisplayList)):(h.removeClass(i.listClass),y.css("display",i.targetDisplayGrid)),i.resizeContainer&&q.css("height",i.origHeight+"px");for(var A={},m=0;2>m;m++){var n=0==m?n=i.prefix:"";A[n+"transform"]=i.scale+" "+i.rotateX+" "+i.rotateY+" "+i.rotateZ,A[n+"filter"]=i.blur+" "+i.grayscale}y.css(A),z.each(function(){var b=this.data,c=a(this);c.hasClass("mix_tohide")?(b.preTX=b.origPos.left-b.hideInterPos.left,b.preTY=b.origPos.top-b.hideInterPos.top):(b.preTX=b.origPos.left-b.preInterPos.left,b.preTY=b.origPos.top-b.preInterPos.top);
for(var d={},e=0;2>e;e++){var f=0==e?f=i.prefix:"";d[f+"transform"]="translate("+b.preTX+"px,"+b.preTY+"px)"}c.css(d)}),"list"==i.layoutMode?(h.addClass(i.listClass),h.removeClass(i.gridClass)):(h.addClass(i.gridClass),h.removeClass(i.listClass));{setTimeout(function(){if(i.resizeContainer){for(var b={},c=0;2>c;c++){var d=0==c?d=i.prefix:"";b[d+"transition"]="all "+l+"ms ease-in-out",b.height=i.newHeight+"px"}q.css(b)}x.css("opacity",i.fade),y.css("opacity",1),y.each(function(){var b=this.data;b.tX=b.finalPos.left-b.showInterPos.left,b.tY=b.finalPos.top-b.showInterPos.top;for(var c={},d=0;2>d;d++){var e=0==d?e=i.prefix:"";c[e+"transition-property"]=e+"transform, "+e+"filter, opacity",c[e+"transition-timing-function"]=i.easing+", linear, linear",c[e+"transition-duration"]=l+"ms",c[e+"transition-delay"]="0",c[e+"transform"]="translate("+b.tX+"px,"+b.tY+"px)",c[e+"filter"]="none"}a(this).css("-webkit-transition","all "+l+"ms "+i.easingFallback).css(c)}),z.each(function(){var b=this.data;b.tX=0!=b.finalPrePos.left?b.finalPrePos.left-b.preInterPos.left:0,b.tY=0!=b.finalPrePos.left?b.finalPrePos.top-b.preInterPos.top:0;for(var c={},d=0;2>d;d++){var e=0==d?e=i.prefix:"";c[e+"transition"]="all "+l+"ms "+i.easing,c[e+"transform"]="translate("+b.tX+"px,"+b.tY+"px)"}a(this).css("-webkit-transition","all "+l+"ms "+i.easingFallback).css(c)});for(var e={},c=0;2>c;c++){var d=0==c?d=i.prefix:"";e[d+"transition"]="all "+l+"ms "+i.easing+", "+d+"filter "+l+"ms linear, opacity "+l+"ms linear",e[d+"transform"]=i.scale+" "+i.rotateX+" "+i.rotateY+" "+i.rotateZ,e[d+"filter"]=i.blur+" "+i.grayscale,e.opacity=i.fade}x.css(e),q.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(b){(b.originalEvent.propertyName.indexOf("transform")>-1||b.originalEvent.propertyName.indexOf("opacity")>-1)&&(o.indexOf(".")>-1?a(b.target).hasClass(o.replace(".",""))&&j():a(b.target).is(o)&&j())})},10)}i.failsafe=setTimeout(function(){i.mixing&&j()},l+400)}else{if(i.resizeContainer&&q.css("height",i.origHeight+"px"),!window.atob)return j(),!1;x=t;{setTimeout(function(){if(q.css(i.perspective),i.resizeContainer){for(var a={},b=0;2>b;b++){var c=0==b?c=i.prefix:"";a[c+"transition"]="height "+l+"ms ease-in-out",a.height=i.minHeight+"px"}q.css(a)}p.css(i.transition);var d=t.length;if(d){for(var e={},b=0;2>b;b++){var c=0==b?c=i.prefix:"";e[c+"transform"]=i.scale+" "+i.rotateX+" "+i.rotateY+" "+i.rotateZ,e[c+"filter"]=i.blur+" "+i.grayscale,e.opacity=i.fade}x.css(e),q.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(a){(a.originalEvent.propertyName.indexOf("transform")>-1||a.originalEvent.propertyName.indexOf("opacity")>-1)&&(h.addClass(i.failClass),j())})}else i.mixing=!1},10)}}}function c(b,c,d,e){function f(a,c){var d=isNaN(1*a.attr(b))?a.attr(b).toLowerCase():1*a.attr(b),e=isNaN(1*c.attr(b))?c.attr(b).toLowerCase():1*c.attr(b);return e>d?-1:d>e?1:0}function g(a){"asc"==c?i.prepend(a).prepend(" "):i.append(a).append(" ")}function h(a){for(var b=a.slice(),c=b.length,d=c;d--;){var e=parseInt(Math.random()*c),f=b[d];b[d]=b[e],b[e]=f}return b}d.find(e.targetSelector).wrapAll('<div class="mix_sorter"/>');var i=d.find(".mix_sorter");if(e.origSort.length||i.find(e.targetSelector+":visible").each(function(){a(this).wrap("<s/>"),e.origSort.push(a(this).parent().html().replace(/\s+/g,"")),a(this).unwrap()}),i.empty(),"reset"==b)a.each(e.startOrder,function(){i.append(this).append(" ")});else if("default"==b)a.each(e.origOrder,function(){g(this)});else if("random"==b)e.newOrder.length||(e.newOrder=h(e.startOrder)),a.each(e.newOrder,function(){i.append(this).append(" ")});else if("custom"==b)a.each(c,function(){g(this)});else{if("undefined"==typeof e.origOrder[0].attr(b))return console.log("No such attribute found. Terminating"),!1;e.newOrder.length||(a.each(e.origOrder,function(){e.newOrder.push(a(this))}),e.newOrder.sort(f)),a.each(e.newOrder,function(){g(this)})}e.checkSort=[],i.find(e.targetSelector+":visible").each(function(b){var c=a(this);0==b&&c.attr("data-checksum","1"),c.wrap("<s/>"),e.checkSort.push(c.parent().html().replace(/\s+/g,"")),c.unwrap()}),d.find(e.targetSelector).unwrap()}function d(a){for(var b=["Webkit","Moz","O","ms"],c=0;c<b.length;c++)if(b[c]+"Transition"in a.style)return b[c];return"transition"in a.style?"":!1}function e(a,b){if(a.length!=b.length)return!1;for(var c=0;c<b.length;c++){if(a[c].compare&&!a[c].compare(b[c]))return!1;if(a[c]!==b[c])return!1}return!0}function f(b){b=b.replace(/\s{2,}/g," ");var c=b.split(" ");return a.each(c,function(a){"all"==this&&(c[a]="mix_all")}),""==c[0]&&c.shift(),c}var g={init:function(e){return this.each(function(){var f={targetSelector:".mix",filterSelector:".filter",sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",listClass:"",gridClass:"",transitionSpeed:600,showOnLoad:"all",sortOnLoad:!1,multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onMixLoad:null,onMixStart:null,onMixEnd:null,container:null,origOrder:[],startOrder:[],newOrder:[],origSort:[],checkSort:[],filter:"",mixing:!1,origDisplay:"",origLayout:"",origHeight:0,newHeight:0,isTouch:!1,resetDelay:0,failsafe:null,prefix:"",easingFallback:"ease-in-out",transition:{},perspective:{},clean:{},fade:"1",scale:"",rotateX:"",rotateY:"",rotateZ:"",blur:"",grayscale:""};e&&a.extend(f,e),this.config=f,a.support.touch="ontouchend"in document,a.support.touch&&(f.isTouch=!0,f.resetDelay=350),f.container=a(this);var g=f.container;if(f.prefix=d(g[0]),f.prefix=f.prefix?"-"+f.prefix.toLowerCase()+"-":"",g.find(f.targetSelector).each(function(){f.origOrder.push(a(this))}),f.sortOnLoad){var h,i;a.isArray(f.sortOnLoad)?(h=f.sortOnLoad[0],i=f.sortOnLoad[1],a(f.sortSelector+"[data-sort="+f.sortOnLoad[0]+"][data-order="+f.sortOnLoad[1]+"]").addClass("active")):(a(f.sortSelector+"[data-sort="+f.sortOnLoad+"]").addClass("active"),h=f.sortOnLoad,f.sortOnLoad="desc"),c(h,i,g,f)}for(var j=0;2>j;j++){var k=0==j?k=f.prefix:"";f.transition[k+"transition"]="all "+f.transitionSpeed+"ms ease-in-out",f.perspective[k+"perspective"]=f.perspectiveDistance+"px",f.perspective[k+"perspective-origin"]=f.perspectiveOrigin}for(var j=0;2>j;j++){var k=0==j?k=f.prefix:"";f.clean[k+"transition"]="none"}"list"==f.layoutMode?(g.addClass(f.listClass),f.origDisplay=f.targetDisplayList):(g.addClass(f.gridClass),f.origDisplay=f.targetDisplayGrid),f.origLayout=f.layoutMode;var l=f.showOnLoad.split(" ");a.each(l,function(){a(f.filterSelector+'[data-filter="'+this+'"]').addClass("active")}),g.find(f.targetSelector).addClass("mix_all"),"all"==l[0]&&(l[0]="mix_all",f.showOnLoad="mix_all");var m=a();a.each(l,function(){m=m.add(a("."+this))}),m.each(function(){var b=a(this);"list"==f.layoutMode?b.css("display",f.targetDisplayList):b.css("display",f.targetDisplayGrid),b.css(f.transition)});setTimeout(function(){f.mixing=!0,m.css("opacity","1");setTimeout(function(){if("list"==f.layoutMode?m.removeStyle(f.prefix+"transition, transition").css({display:f.targetDisplayList,opacity:1}):m.removeStyle(f.prefix+"transition, transition").css({display:f.targetDisplayGrid,opacity:1}),f.mixing=!1,"function"==typeof f.onMixLoad){var a=f.onMixLoad.call(this,f);f=a?a:f}},f.transitionSpeed)},10);f.filter=f.showOnLoad,a(f.sortSelector).bind(f.buttonEvent,function(){if(!f.mixing){var c=a(this),d=c.attr("data-sort"),e=c.attr("data-order");if(c.hasClass("active")){if("random"!=d)return!1}else a(f.sortSelector).removeClass("active"),c.addClass("active");g.find(f.targetSelector).each(function(){f.startOrder.push(a(this))}),b(f.filter,d,e,g,f)}}),a(f.filterSelector).bind(f.buttonEvent,function(){if(!f.mixing){var c=a(this);if(0==f.multiFilter)a(f.filterSelector).removeClass("active"),c.addClass("active"),f.filter=c.attr("data-filter"),a(f.filterSelector+'[data-filter="'+f.filter+'"]').addClass("active");else{var d=c.attr("data-filter");if(c.hasClass("active")){c.removeClass("active");var e=new RegExp("(\\s|^)"+d);f.filter=f.filter.replace(e,"")}else c.addClass("active"),f.filter=f.filter+" "+d}b(f.filter,null,null,g,f)}})})},toGrid:function(){return this.each(function(){var c=this.config;"grid"!=c.layoutMode&&(c.layoutMode="grid",b(c.filter,null,null,a(this),c))})},toList:function(){return this.each(function(){var c=this.config;"list"!=c.layoutMode&&(c.layoutMode="list",b(c.filter,null,null,a(this),c))})},filter:function(c){return this.each(function(){var d=this.config;d.mixing||(a(d.filterSelector).removeClass("active"),a(d.filterSelector+'[data-filter="'+c+'"]').addClass("active"),b(c,null,null,a(this),d))})},sort:function(c){return this.each(function(){var d=this.config,e=a(this);if(!d.mixing){if(a(d.sortSelector).removeClass("active"),a.isArray(c)){var f=c[0],g=c[1];a(d.sortSelector+'[data-sort="'+c[0]+'"][data-order="'+c[1]+'"]').addClass("active")}else{a(d.sortSelector+'[data-sort="'+c+'"]').addClass("active");var f=c,g="desc"}e.find(d.targetSelector).each(function(){d.startOrder.push(a(this))}),b(d.filter,f,g,e,d)}})},multimix:function(c){return this.each(function(){var d=this.config,e=a(this);multiOut={filter:d.filter,sort:null,order:"desc",layoutMode:d.layoutMode},a.extend(multiOut,c),d.mixing||(a(d.filterSelector).add(d.sortSelector).removeClass("active"),a(d.filterSelector+'[data-filter="'+multiOut.filter+'"]').addClass("active"),"undefined"!=typeof multiOut.sort&&(a(d.sortSelector+'[data-sort="'+multiOut.sort+'"][data-order="'+multiOut.order+'"]').addClass("active"),e.find(d.targetSelector).each(function(){d.startOrder.push(a(this))})),d.layoutMode=multiOut.layoutMode,b(multiOut.filter,multiOut.sort,multiOut.order,e,d))})},remix:function(c){return this.each(function(){var d=this.config,e=a(this);d.origOrder=[],e.find(d.targetSelector).each(function(){var b=a(this);b.addClass("mix_all"),d.origOrder.push(b)}),d.mixing||"undefined"==typeof c||(a(d.filterSelector).removeClass("active"),a(d.filterSelector+'[data-filter="'+c+'"]').addClass("active"),b(c,null,null,e,d))})}};a.fn.mixitup=function(a){return g[a]?g[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void 0:g.init.apply(this,arguments)},a.fn.removeStyle=function(b){return this.each(function(){var c=a(this);b=b.replace(/\s+/g,"");var d=b.split(",");a.each(d,function(){var a=new RegExp(this.toString()+"[^;]+;?","g");c.attr("style",function(b,c){return c?c.replace(a,""):void 0})})})}}(jQuery);